<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="last-modified" content="2025-05-06 01:50:48 UTC">
    <title>SafeNest Translation</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=Caveat:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --turquoise: #2A9D8F;
            --deep-turquoise: #264653;
            --sand: #E9C46A;
            --soft-sand: #F4E9CD;
            --gentle-green: #8AB17D;
            --coral: #E76F51;
            --light-turquoise: #83C5BE;
            --cream: #FEFAE0;
            --off-white: #F8F9FA;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background-color: var(--off-white);
        }

        /* Logo styles */
        .logo {
            position: relative;
            width: 48px;
            height: 48px;
        }

        .logo-base {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 35% 65% 60% 40% / 50% 50% 50% 50%;
            background: var(--turquoise);
            transform: rotate(-5deg);
            transition: all 0.5s ease;
        }

        .logo-wave {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 40%;
            background: var(--deep-turquoise);
            border-radius: 30% 70% 100% 0% / 0% 100% 0% 100%;
            transform: rotate(-10deg) translateY(2px);
        }

        .logo-roof {
            position: absolute;
            top: 0;
            left: 10%;
            width: 80%;
            height: 35%;
            background: var(--sand);
            clip-path: polygon(50% 0%, 100% 100%, 0% 100%);
            transform: translateY(-15%);
        }

        /* Glass effect and cards */
        .glass-effect {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(42, 157, 143, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .translation-card {
            transition: all 0.3s ease;
            border-left: 4px solid var(--turquoise);
        }

        .translation-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }

        /* Button styles */
        .primary-button {
            background: linear-gradient(135deg, var(--turquoise) 0%, var(--deep-turquoise) 100%);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .primary-button::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: transform 0.6s ease;
        }

        .primary-button:hover::after {
            transform: translateX(200%);
        }

        /* Animations */
        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .floating {
            animation: float 6s ease-in-out infinite;
        }

        /* Voice wave animation */
        .voice-wave {
            display: flex;
            align-items: center;
            gap: 3px;
        }

        .wave-bar {
            width: 3px;
            height: 20px;
            background: var(--turquoise);
            border-radius: 3px;
            animation: wave 1s ease-in-out infinite;
        }

        @keyframes wave {
            0%, 100% { transform: scaleY(0.5); }
            50% { transform: scaleY(1.5); }
        }

        /* Custom scrollbar */
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }

        .custom-scrollbar::-webkit-scrollbar-track {
            background: var(--off-white);
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: var(--light-turquoise);
            border-radius: 3px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb:hover {
            background: var(--turquoise);
        }

        /* Loading animation */
        .loading-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--turquoise);
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(0.8); opacity: 0.5; }
            50% { transform: scale(1.2); opacity: 1; }
        }

        /* Translation loading indicator */
        .translation-loading {
            display: none;
            align-items: center;
            gap: 8px;
            color: var(--turquoise);
            font-weight: 500;
            margin-top: 8px;
        }

        .translation-loading.active {
            display: flex;
        }

        .translation-loading .dots {
            display: flex;
            gap: 4px;
        }

        .translation-loading .dot {
            width: 6px;
            height: 6px;
            background: var(--turquoise);
            border-radius: 50%;
            animation: loadingDot 1.4s infinite ease-in-out;
        }

        .translation-loading .dot:nth-child(1) { animation-delay: 0s; }
        .translation-loading .dot:nth-child(2) { animation-delay: 0.2s; }
        .translation-loading .dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes loadingDot {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }
        
        /* User welcome bar */
        .user-welcome {
            background: linear-gradient(to right, var(--deep-turquoise), var(--turquoise));
            color: white;
            padding: 8px 0;
            font-size: 0.85rem;
        }
        
        /* Recent translation card */
        .recent-translation-card {
            transition: all 0.3s ease;
            border-left: 3px solid var(--turquoise);
        }
        
        .recent-translation-card:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }
        
        /* Delayed loading dots */
        .delay-0 {
            animation-delay: 0s;
        }
        
        .delay-150 {
            animation-delay: 0.15s;
        }
        
        .delay-300 {
            animation-delay: 0.3s;
        }
        
        /* Error message */
        .error-message {
            background-color: rgba(231, 111, 81, 0.1);
            border-left: 3px solid var(--coral);
            color: var(--coral);
            padding: 0.75rem 1rem;
            margin-top: 0.75rem;
            border-radius: 0.375rem;
            display: none;
        }
        
        .error-message.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Audio player styles */
        .audio-player {
            display: none;
            margin-top: 0.75rem;
            background-color: rgba(42, 157, 143, 0.1);
            border-radius: 0.5rem;
            padding: 0.75rem;
        }
        
        .audio-player.active {
            display: block;
        }
        
        /* Language pair badge */
        .language-pair {
            background-color: var(--soft-sand);
            border-radius: 1rem;
            padding: 0.25rem 0.75rem;
            font-size: 0.75rem;
            color: var(--deep-turquoise);
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }
    </style>
</head>
<body class="min-h-screen bg-off-white">
    <!-- Navigation -->
    <nav class="bg-white shadow-md">
        <div class="container mx-auto px-6 py-4">
            <div class="flex justify-between items-center">
                <!-- Logo -->
                <div class="flex items-center space-x-3">
                    <div class="logo-container">
                        <div class="logo">
                            <div class="logo-base"></div>
                            <div class="logo-wave"></div>
                            <div class="logo-roof"></div>
                        </div>
                    </div>
                    <div class="text-xl font-bold text-deep-turquoise">Safe<span class="text-turquoise">Nest</span></div>
                </div>

                <!-- Navigation Links -->
                <div class="flex space-x-8">
                    <a href="/" class="nav-link text-gray-600 hover:text-turquoise transition-colors">Home</a>
                    <a href="/translation" class="nav-link text-turquoise border-b-2 border-turquoise">Translation</a>
                    <a href="/assistant" class="nav-link text-gray-600 hover:text-turquoise transition-colors">Assistant</a>
                    <a href="/document_processing" class="nav-link text-gray-600 hover:text-turquoise transition-colors">Documents</a>
                    <a href="/resource_map" class="nav-link text-gray-600 hover:text-turquoise transition-colors">Resource Map</a>
                </div>

                <!-- Language Selector -->
                <select id="interfaceLanguage" class="bg-cream text-deep-turquoise px-4 py-2 rounded-lg border-2 border-transparent hover:border-turquoise focus:border-turquoise focus:outline-none transition-all cursor-pointer">
                    <option value="en-GB">English</option>
                    <option value="fr-FR">Français</option>
                    <option value="de-DE">Deutsch</option>
                    <option value="ar-SA">العربية</option>
                    <option value="es-ES">Español</option>
                    <option value="ru-RU">Русский</option>
                    <option value="zh-CN">中文</option>
                    <option value="tr-TR">Türkçe</option>
                    <option value="fa-IR">فارسی</option>
                    <option value="ur-PK">اردو</option>
                    <option value="so-SO">Soomaali</option>
                    <option value="ps-PK">پښتو</option>
                    <option value="ku-TR">Kurdî</option>
                    <option value="ti-TI">ትግርኛ</option>
                    <option value="am-ET">አማርኛ</option>
                    <option value="sw-SZ">Kiswahili</option>
                </select>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8">
        <!-- Hero Section -->
        <div class="text-center mb-12">
            <div class="inline-block mb-6">
                <span class="bg-cream text-turquoise px-4 py-1 rounded-full text-sm font-medium">AI-Powered Translation</span>
            </div>
            <h1 class="text-4xl md:text-5xl font-bold mb-4 text-deep-turquoise">Breaking Language Barriers</h1>
            <p class="text-gray-600 max-w-2xl mx-auto text-lg">
                Experience seamless communication across languages with our advanced neural machine translation technology.
            </p>
        </div>

        <!-- Translation Interface -->
        <div class="glass-effect rounded-xl p-8 mb-12">
            <!-- Language Selection -->
            <div class="flex flex-col md:flex-row items-center gap-6 mb-8">
                <div class="w-full md:w-2/5">
                    <label class="block text-sm font-medium text-deep-turquoise mb-2">From:</label>
                    <select id="sourceLanguage" name="source-language" class="w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-turquoise focus:ring-1 focus:ring-turquoise transition-colors bg-white">
                        <option value="en-GB">English</option>
                        <option value="fr-FR">Français</option>
                        <option value="de-DE">Deutsch</option>
                        <option value="ar-SA">العربية</option>
                        <option value="es-ES">Español</option>
                        <option value="ru-RU">Русский</option>
                        <option value="zh-CN">中文</option>
                        <option value="tr-TR">Türkçe</option>
                        <option value="fa-IR">فارسی</option>
                        <option value="ur-PK">اردو</option>
                        <option value="so-SO">Soomaali</option>
                        <option value="ps-PK">پښتو</option>
                        <option value="ku-TR">Kurdî</option>
                        <option value="ti-TI">ትግርኛ</option>
                        <option value="am-ET">አማርኛ</option>
                        <option value="sw-SZ">Kiswahili</option>
                    </select>
                </div>
                
                <div class="w-full md:w-1/5 flex justify-center">
                    <button id="swapLanguages" name="swap-languages" class="p-4 rounded-full bg-cream hover:bg-sand text-deep-turquoise transition-all transform hover:scale-110 hover:rotate-180 duration-300">
                        <i class="fas fa-exchange-alt"></i>
                    </button>
                </div>
                
                <div class="w-full md:w-2/5">
                    <label class="block text-sm font-medium text-deep-turquoise mb-2">To:</label>
                    <select id="targetLanguage" name="target-language" class="w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-turquoise focus:ring-1 focus:ring-turquoise transition-colors bg-white">
                        <option value="ar-SA">العربية</option>
                        <option value="en-GB">English</option>
                        <option value="fr-FR">Français</option>
                        <option value="de-DE">Deutsch</option>
                        <option value="es-ES">Español</option>
                        <option value="ru-RU">Русский</option>
                        <option value="zh-CN">中文</option>
                        <option value="tr-TR">Türkçe</option>
                        <option value="fa-IR">فارسی</option>
                        <option value="ur-PK">اردو</option>
                        <option value="so-SO">Soomaali</option>
                        <option value="ps-PK">پښتو</option>
                        <option value="ku-TR">Kurdî</option>
                        <option value="ti-TI">ትግርኛ</option>
                        <option value="am-ET">አማርኛ</option>
                        <option value="sw-SZ">Kiswahili</option>
                    </select>
                </div>
            </div>

            <!-- Translation Areas -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Source Text -->
                <div class="translation-card bg-white rounded-xl p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="font-semibold text-deep-turquoise">Source Text</h3>
                        <div class="flex space-x-3">
                            <button id="voiceInputBtn" name="voice-input" class="p-2 rounded-lg hover:bg-cream text-turquoise transition-colors" title="Voice Input">
                                <i class="fas fa-microphone"></i>
                            </button>
                            <button id="pasteBtn" name="paste" class="p-2 rounded-lg hover:bg-cream text-turquoise transition-colors" title="Paste">
                                <i class="fas fa-paste"></i>
                            </button>
                            <button id="clearSourceBtn" name="clear-source" class="p-2 rounded-lg hover:bg-cream text-turquoise transition-colors" title="Clear">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                    <textarea id="sourceText" name="source-text" 
                              class="w-full h-40 p-4 rounded-lg border-2 border-gray-200 focus:border-turquoise focus:ring-1 focus:ring-turquoise custom-scrollbar resize-none"
                              placeholder="Type or paste text here..."></textarea>
                    <div class="mt-2 flex justify-between text-sm text-gray-500">
                        <span id="characterCount" class="character-count">0 characters</span>
                        <button id="copySourceBtn" name="copy-source" class="hover:text-turquoise transition-colors">
                            <i class="fas fa-copy mr-1"></i> Copy
                        </button>
                    </div>
                    <div id="sourceErrorMessage" class="error-message">
                        <i class="fas fa-exclamation-circle mr-2"></i>
                        <span id="sourceErrorText"></span>
                    </div>
                </div>

                <!-- Translation -->
                <div class="translation-card bg-white rounded-xl p-6">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="font-semibold text-deep-turquoise">Translation</h3>
                        <div class="flex space-x-3">
                            <button id="listenBtn" name="listen" disabled class="p-2 rounded-lg hover:bg-cream text-gray-400 transition-colors" title="Listen">
                                <i class="fas fa-volume-up"></i>
                            </button>
                            <button id="copyTranslationBtn" name="copy-translation" disabled class="p-2 rounded-lg hover:bg-cream text-gray-400 transition-colors" title="Copy">
                                <i class="fas fa-copy"></i>
                            </button>
                            <button id="downloadBtn" name="download" disabled class="p-2 rounded-lg hover:bg-cream text-gray-400 transition-colors" title="Download">
                                <i class="fas fa-download"></i>
                            </button>
                        </div>
                    </div>
                    <div class="relative h-40">
                        <textarea id="translatedText" name="translated-text" 
                                  readonly
                                  class="w-full h-full p-4 rounded-lg border-2 border-gray-200 focus:border-turquoise focus:ring-1 focus:ring-turquoise custom-scrollbar resize-none"></textarea>
                        <div id="emptyState" class="empty-state absolute inset-0 flex items-center justify-center text-gray-400">
                            <div class="text-center">
                                <i class="fas fa-language text-4xl mb-2"></i>
                                <p>Translation will appear here</p>
                            </div>
                        </div>
                    </div>
                    <div id="audioPlayer" class="audio-player">
                        <div class="flex items-center justify-between">
                            <div class="language-pair">
                                <i class="fas fa-volume-up"></i>
                                <span id="audioLanguage"></span>
                            </div>
                            <button id="replayAudio" class="text-turquoise hover:text-deep-turquoise transition-colors">
                                <i class="fas fa-redo-alt"></i>
                            </button>
                        </div>
                        <audio id="translationAudio" controls class="w-full mt-2">
                            <source src="" type="audio/mpeg">
                            Your browser does not support the audio element.
                        </audio>
                    </div>
                    <div id="translationErrorMessage" class="error-message">
                        <i class="fas fa-exclamation-circle mr-2"></i>
                        <span id="translationErrorText"></span>
                    </div>
                </div>
            </div>

            <!-- Translate Button -->
            <div class="flex justify-center mt-8">
                <button id="translateBtn" class="primary-button text-white px-8 py-3 rounded-lg font-medium flex items-center gap-2">
                    <i class="fas fa-language"></i>
                    Translate
                </button>
            </div>

            <!-- Loading Indicator -->
            <div id="translationLoading" class="translation-loading justify-center">
                <span>Translating</span>
                <div class="dots">
                    <div class="dot"></div>
                    <div class="dot"></div>
                    <div class="dot"></div>
                </div>
            </div>
        </div>

        <!-- Recent Translations -->
        <div class="glass-effect rounded-xl p-6">
            <h2 class="text-2xl font-bold text-deep-turquoise mb-6 flex items-center">
                <i class="fas fa-history mr-3"></i>Recent Translations
            </h2>
            <div id="recentTranslations" class="space-y-4 recent-translations">
                <div class="text-center text-gray-500 py-6" id="noTranslationsMessage">
                    <i class="fas fa-history text-3xl mb-2 text-turquoise/50"></i>
                    <p>Your recent translations will appear here</p>
                </div>
            </div>
        </div>
        
        <!-- Translation Tips -->
        <div class="bg-cream/50 rounded-xl p-6 mt-8">
            <h2 class="text-xl font-bold text-deep-turquoise mb-4 flex items-center">
                <i class="fas fa-lightbulb mr-3 text-sand"></i>Translation Tips
            </h2>
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="bg-white p-4 rounded-lg shadow">
                    <h3 class="font-semibold text-turquoise mb-2">Be Specific</h3>
                    <p class="text-sm text-gray-600">Use clear, specific language to ensure more accurate translations.</p>
                </div>
                <div class="bg-white p-4 rounded-lg shadow">
                    <h3 class="font-semibold text-turquoise mb-2">Break Up Long Text</h3>
                    <p class="text-sm text-gray-600">For better results, translate paragraphs separately rather than very long documents.</p>
                </div>
                <div class="bg-white p-4 rounded-lg shadow">
                    <h3 class="font-semibold text-turquoise mb-2">Check Context</h3>
                    <p class="text-sm text-gray-600">Review translations to ensure they maintain the intended meaning in context.</p>
                </div>
            </div>
        </div>
    </main>
    
    <!-- Footer -->
    <footer class="bg-deep-turquoise text-white mt-16">
        <div class="container mx-auto px-6 py-8">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <div class="flex items-center mb-4">
                        <div class="logo mr-3" style="transform: scale(0.7);">
                            <div class="logo-base"></div>
                            <div class="logo-wave"></div>
                            <div class="logo-roof"></div>
                        </div>
                        <div class="text-xl font-bold">Safe<span class="text-light-turquoise">Nest</span></div>
                    </div>
                    <p class="text-gray-300 text-sm">
                        Supporting refugees with accessible, multilingual technology solutions.
                    </p>
                    <div class="mt-4 flex space-x-4">
                        <a href="#" class="text-gray-300 hover:text-white transition-colors">
                            <i class="fab fa-twitter"></i>
                        </a>
                        <a href="#" class="text-gray-300 hover:text-white transition-colors">
                            <i class="fab fa-facebook"></i>
                        </a>
                        <a href="#" class="text-gray-300 hover:text-white transition-colors">
                            <i class="fab fa-instagram"></i>
                        </a>
                        <a href="#" class="text-gray-300 hover:text-white transition-colors">
                            <i class="fab fa-linkedin"></i>
                        </a>
                    </div>
                </div>
                
                <div>
                    <h3 class="text-lg font-semibold mb-4">Quick Links</h3>
                    <ul class="space-y-2">
                        <li><a href="/" class="text-gray-300 hover:text-white transition-colors">Home</a></li>
                        <li><a href="/translation" class="text-gray-300 hover:text-white transition-colors">Translation</a></li>
                        <li><a href="/assistant" class="text-gray-300 hover:text-white transition-colors">Assistant</a></li>
                        <li><a href="/document_processing" class="text-gray-300 hover:text-white transition-colors">Document Processing</a></li>
                        <li><a href="/resource_map" class="text-gray-300 hover:text-white transition-colors">Resource Map</a></li>
                    </ul>
                </div>
                
                <div>
                    <h3 class="text-lg font-semibold mb-4">Contact & Support</h3>
                    <ul class="space-y-2">
                        <li class="flex items-start">
                            <i class="fas fa-envelope mt-1 mr-2 text-light-turquoise"></i>
                            <span>support@safenest.org</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-phone mt-1 mr-2 text-light-turquoise"></i>
                            <span>+1 (800) 555-SAFE</span>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-question-circle mt-1 mr-2 text-light-turquoise"></i>
                            <a href="#" class="hover:text-white transition-colors">Help Center</a>
                        </li>
                        <li class="flex items-start">
                            <i class="fas fa-shield-alt mt-1 mr-2 text-light-turquoise"></i>
                            <a href="#" class="hover:text-white transition-colors">Privacy Policy</a>
                        </li>
                    </ul>
                </div>
            </div>
            
            <div class="border-t border-turquoise/30 mt-8 pt-6 flex flex-col md:flex-row justify-between items-center">
                <p class="text-sm text-gray-300">© 2025 SafeNest. All rights reserved.</p>
                <div class="mt-4 md:mt-0 text-xs text-gray-400">
                    <span>Last updated: 2025-05-06 01:50:48 UTC</span>
                    <span class="mx-2">|</span>
                    <span>User: Maryem-Jlassi</span>
                </div>
            </div>
        </div>
    </footer>

    <!-- Voice Input Modal -->
    <div class="voice-modal fixed inset-0 z-50 hidden" id="voiceModal">
        <div class="absolute inset-0 bg-deep-turquoise/50 backdrop-filter backdrop-blur-sm"></div>
        <div class="absolute inset-0 flex items-center justify-center p-4">
            <div class="glass-effect rounded-2xl p-8 max-w-md w-full mx-4 transform transition-all">
                <div class="text-center">
                    <div id="voiceVisualizer" class="voice-wave mb-6 justify-center hidden">
                        <div class="wave-bar"></div>
                        <div class="wave-bar"></div>
                        <div class="wave-bar"></div>
                        <div class="wave-bar"></div>
                        <div class="wave-bar"></div>
                    </div>
                    
                    <div id="microphoneButton" 
                         class="w-20 h-20 rounded-full bg-turquoise text-white flex items-center justify-center mx-auto mb-4 cursor-pointer hover:bg-deep-turquoise transition-all transform hover:scale-105">
                        <i class="fas fa-microphone text-2xl"></i>
                    </div>
                    
                    <h3 id="voiceStatus" class="text-xl font-semibold text-deep-turquoise mb-2">Click to Start Speaking</h3>
                    <p id="voiceLanguage" class="text-gray-600 mb-6">Language will be detected automatically</p>
                    
                    <div class="flex justify-center gap-4">
                        <button id="cancelVoice" 
                                class="px-6 py-2 border-2 border-gray-300 rounded-lg hover:border-turquoise hover:text-turquoise transition-all">
                            Cancel
                        </button>
                        <button id="confirmVoice" 
                                class="px-6 py-2 bg-turquoise text-white rounded-lg hover:bg-deep-turquoise transition-all hidden">
                            Confirm
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div class="loading-overlay fixed inset-0 z-40 hidden" id="loadingOverlay">
        <div class="absolute inset-0 bg-white/90 backdrop-filter backdrop-blur-sm"></div>
        <div class="absolute inset-0 flex items-center justify-center">
            <div class="text-center">
                <div class="flex justify-center space-x-2 mb-4">
                    <div class="loading-dot delay-0"></div>
                    <div class="loading-dot delay-150"></div>
                    <div class="loading-dot delay-300"></div>
                </div>
                <p class="text-deep-turquoise font-medium">Translating your text...</p>
            </div>
        </div>
    </div>

    <!-- Help Button -->
    <div class="fixed bottom-6 right-6">
        <button id="helpButton" class="bg-turquoise hover:bg-deep-turquoise text-white rounded-full w-14 h-14 flex items-center justify-center shadow-lg transition-all transform hover:scale-110">
            <i class="fas fa-question text-xl"></i>
        </button>
    </div>

    <!-- Help Modal -->
    <div class="fixed inset-0 z-50 hidden" id="helpModal">
        <div class="absolute inset-0 bg-deep-turquoise/50 backdrop-filter backdrop-blur-sm"></div>
        <div class="absolute inset-0 flex items-center justify-center p-4">
            <div class="glass-effect rounded-2xl p-8 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto">
                <div class="flex justify-between items-start mb-6">
                    <h2 class="text-2xl font-bold text-deep-turquoise">How to Use the Translation Tool</h2>
                    <button id="closeHelpModal" class="text-gray-400 hover:text-deep-turquoise text-xl">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="space-y-6">
                    <div>
                        <h3 class="text-lg font-semibold text-turquoise mb-2">Basic Translation</h3>
                        <ol class="list-decimal pl-5 space-y-2 text-gray-600">
                            <li>Select your source language from the "From" dropdown</li>
                            <li>Select your target language from the "To" dropdown</li>
                            <li>Type or paste text in the source text area</li>
                            <li>Click the "Translate" button</li>
                            <li>View your translation in the right panel</li>
                        </ol>
                    </div>
                    
                    <div>
                        <h3 class="text-lg font-semibold text-turquoise mb-2">Voice Input</h3>
                        <p class="text-gray-600 mb-2">To use voice input for translation:</p>
                        <ol class="list-decimal pl-5 space-y-2 text-gray-600">
                            <li>Click the microphone icon in the source text area</li>
                            <li>Click the microphone button in the popup and start speaking</li>
                            <li>Click "Confirm" when you're done</li>
                            <li>Your speech will be transcribed in the source text area</li>
                            <li>Click "Translate" to translate the transcribed text</li>
                        </ol>
                    </div>
                    
                    <div>
                        <h3 class="text-lg font-semibold text-turquoise mb-2">Translation History</h3>
                        <p class="text-gray-600 mb-2">Your recent translations are saved for easy access:</p>
                        <ul class="list-disc pl-5 space-y-2 text-gray-600">
                            <li>View your recent translations in the "Recent Translations" section</li>
                            <li>Click the refresh icon to reuse a previous translation</li>
                            <li>Click the X icon to remove a translation from your history</li>
                        </ul>
                    </div>
                    
                    <div>
                        <h3 class="text-lg font-semibold text-turquoise mb-2">Additional Features</h3>
                        <ul class="list-disc pl-5 space-y-2 text-gray-600">
                            <li><strong>Text-to-Speech:</strong> Click the speaker icon to hear the translated text</li>
                            <li><strong>Copy:</strong> Quickly copy source or translated text to clipboard</li>
                            <li><strong>Download:</strong> Save translations as text files</li>
                            <li><strong>Swap Languages:</strong> Quickly switch between source and target languages</li>
                        </ul>
                    </div>
                </div>
                
                <div class="mt-8 pt-6 border-t border-gray-200">
                    <button id="closeHelpBtn" class="bg-turquoise hover:bg-deep-turquoise text-white px-6 py-2 rounded-lg font-medium">
                        Got it, thanks!
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const TranslationApp = {
                config: {
                    currentUser: 'Maryem-Jlassi',
                    currentTime: new Date('2025-05-06 01:50:48'),
                    maxCharacterLimit: 5000,
                    supportedLanguages: {
                        'en-GB': 'English',
                        'fr-FR': 'Français',
                        'de-DE': 'Deutsch',
                        'ar-SA': 'العربية',
                        'es-ES': 'Español',
                        'ru-RU': 'Русский',
                        'zh-CN': '中文',
                        'tr-TR': 'Türkçe',
                        'fa-IR': 'فارسی',
                        'ur-PK': 'اردو',
                        'so-SO': 'Soomaali',
                        'ps-PK': 'پښتو',
                        'ku-TR': 'Kurdî',
                        'ti-TI': 'ትግርኛ',
                        'am-ET': 'አማርኛ',
                        'sw-SZ': 'Kiswahili'
                    }
                },

                elements: {
                    sourceText: document.getElementById('sourceText'),
                    translatedText: document.getElementById('translatedText'),
                    translateButton: document.getElementById('translateBtn'),
                    characterCount: document.getElementById('characterCount'),
                    sourceLanguage: document.getElementById('sourceLanguage'),
                    targetLanguage: document.getElementById('targetLanguage'),
                    swapLanguages: document.getElementById('swapLanguages'),
                    voiceInput: document.getElementById('voiceInputBtn'),
                    copySource: document.getElementById('copySourceBtn'),
                    copyTranslation: document.getElementById('copyTranslationBtn'),
                    clearSource: document.getElementById('clearSourceBtn'),
                    listen: document.getElementById('listenBtn'),
                    download: document.getElementById('downloadBtn'),
                    emptyState: document.getElementById('emptyState'),
                    loadingOverlay: document.getElementById('loadingOverlay'),
                    voiceModal: document.getElementById('voiceModal'),
                    recentTranslations: document.getElementById('recentTranslations'),
                    noTranslationsMessage: document.getElementById('noTranslationsMessage'),
                    translationLoading: document.getElementById('translationLoading'),
                    helpButton: document.getElementById('helpButton'),
                    helpModal: document.getElementById('helpModal'),
                    closeHelpModal: document.getElementById('closeHelpModal'),
                    closeHelpBtn: document.getElementById('closeHelpBtn'),
                    microphoneButton: document.getElementById('microphoneButton'),
                    voiceVisualizer: document.getElementById('voiceVisualizer'),
                    voiceStatus: document.getElementById('voiceStatus'),
                    cancelVoice: document.getElementById('cancelVoice'),
                    confirmVoice: document.getElementById('confirmVoice'),
                    pasteButton: document.getElementById('pasteBtn'),
                    sourceErrorMessage: document.getElementById('sourceErrorMessage'),
                    sourceErrorText: document.getElementById('sourceErrorText'),
                    translationErrorMessage: document.getElementById('translationErrorMessage'),
                    translationErrorText: document.getElementById('translationErrorText'),
                    audioPlayer: document.getElementById('audioPlayer'),
                    translationAudio: document.getElementById('translationAudio'),
                    audioLanguage: document.getElementById('audioLanguage'),
                    replayAudio: document.getElementById('replayAudio'),
                    interfaceLanguage: document.getElementById('interfaceLanguage')
                },

                state: {
                    isTranslating: false,
                    isRecording: false,
                    recentTranslations: [],
                    recordedText: '',
                    speechRecognition: null,
                    currentAudioUrl: null
                },

                init() {
                    this.setupEventListeners();
                    this.loadRecentTranslations();
                    this.setupSpeechRecognition();
                    
                    // Check for session-based initial text if any
                    const initialText = sessionStorage.getItem('initialTranslationText');
                    if (initialText) {
                        this.elements.sourceText.value = initialText;
                        this.updateCharacterCount();
                        sessionStorage.removeItem('initialTranslationText');
                    }
                },

                setupEventListeners() {
                    // Source text input
                    this.elements.sourceText.addEventListener('input', () => {
                        this.updateCharacterCount();
                        this.toggleEmptyState();
                    });

                    // Translate button
                    this.elements.translateButton.addEventListener('click', () => {
                        this.performTranslation();
                    });

                    // Swap languages
                    this.elements.swapLanguages.addEventListener('click', () => {
                        this.swapLanguages();
                    });

                    // Voice input
                    this.elements.voiceInput.addEventListener('click', () => {
                        this.startVoiceInput();
                    });

                    // Copy buttons
                    this.elements.copySource.addEventListener('click', () => {
                        this.copyText(this.elements.sourceText);
                    });

                    this.elements.copyTranslation.addEventListener('click', () => {
                        this.copyText(this.elements.translatedText);
                    });

                    // Clear source
                    this.elements.clearSource.addEventListener('click', () => {
                        this.clearSource();
                    });

                    // Listen button
                    this.elements.listen.addEventListener('click', () => {
                        if (this.state.currentAudioUrl) {
                            this.elements.translationAudio.play();
                        } else {
                            this.speakText(this.elements.translatedText.value, this.elements.targetLanguage.value);
                        }
                    });

                    // Download button
                    this.elements.download.addEventListener('click', () => {
                        this.downloadTranslation();
                    });
                    
                    // Help modal
                    this.elements.helpButton.addEventListener('click', () => {
                        this.elements.helpModal.classList.remove('hidden');
                    });
                    
                    this.elements.closeHelpModal.addEventListener('click', () => {
                        this.elements.helpModal.classList.add('hidden');
                    });
                    
                    this.elements.closeHelpBtn.addEventListener('click', () => {
                        this.elements.helpModal.classList.add('hidden');
                    });
                    
                    // Voice modal
                    this.elements.microphoneButton.addEventListener('click', () => {
                        if (!this.state.isRecording) {
                            this.startRecording();
                        } else {
                            this.stopRecording();
                        }
                    });
                    
                    this.elements.cancelVoice.addEventListener('click', () => {
                        this.cancelVoiceInput();
                    });
                    
                    this.elements.confirmVoice.addEventListener('click', () => {
                        this.confirmVoiceInput();
                    });
                    
                    // Paste button
                    this.elements.pasteButton.addEventListener('click', () => {
                        navigator.clipboard.readText()
                            .then(text => {
                                this.elements.sourceText.value = text;
                                this.updateCharacterCount();
                                this.toggleEmptyState();
                            })
                            .catch(err => {
                                console.error('Failed to read clipboard:', err);
                                this.showSourceError('Permission to access clipboard was denied');
                            });
                    });
                    
                    // Audio player replay button
                    this.elements.replayAudio.addEventListener('click', () => {
                        this.elements.translationAudio.currentTime = 0;
                        this.elements.translationAudio.play();
                    });
                    
                    // Also enable translation on enter key in text area
                    this.elements.sourceText.addEventListener('keydown', (e) => {
                        // Check if Ctrl+Enter was pressed
                        if (e.ctrlKey && e.key === 'Enter') {
                            this.performTranslation();
                        }
                    });
                },
                
                setupSpeechRecognition() {
                    if ('webkitSpeechRecognition' in window) {
                        this.state.speechRecognition = new webkitSpeechRecognition();
                        this.state.speechRecognition.continuous = true;
                        this.state.speechRecognition.interimResults = true;
                        
                        this.state.speechRecognition.onstart = () => {
                            this.state.isRecording = true;
                            this.elements.voiceStatus.textContent = 'Listening...';
                            this.elements.voiceVisualizer.classList.remove('hidden');
                            this.elements.microphoneButton.classList.add('bg-coral');
                            this.elements.microphoneButton.classList.remove('bg-turquoise');
                        };
                        
                        this.state.speechRecognition.onresult = (event) => {
                            this.state.recordedText = '';
                            for (let i = 0; i < event.results.length; i++) {
                                this.state.recordedText += event.results[i][0].transcript;
                            }
                            this.elements.confirmVoice.classList.remove('hidden');
                        };
                        
                        this.state.speechRecognition.onerror = (event) => {
                            console.error('Speech recognition error:', event.error);
                            this.elements.voiceStatus.textContent = 'Error: ' + event.error;
                        };
                        
                        this.state.speechRecognition.onend = () => {
                            this.state.isRecording = false;
                            this.elements.voiceVisualizer.classList.add('hidden');
                            this.elements.microphoneButton.classList.add('bg-turquoise');
                            this.elements.microphoneButton.classList.remove('bg-coral');
                            
                            if (this.state.recordedText) {
                                this.elements.voiceStatus.textContent = 'Recording Complete';
                            } else {
                                this.elements.voiceStatus.textContent = 'Click to Start Speaking';
                                this.elements.confirmVoice.classList.add('hidden');
                            }
                        };
                    }
                },

                performTranslation() {
                    // Hide any previous error messages
                    this.hideSourceError();
                    this.hideTranslationError();
                    
                    // Don't proceed if already translating
                    if (this.state.isTranslating) {
                        return;
                    }
                    
                    // Check if there's text to translate
                    const sourceText = this.elements.sourceText.value.trim();
                    if (!sourceText) {
                        this.showSourceError('Please enter text to translate');
                        return;
                    }
                    
                    // Check if the source and target languages are the same
                    const sourceLang = this.elements.sourceLanguage.value;
                    const targetLang = this.elements.targetLanguage.value;
                    
                    if (sourceLang === targetLang) {
                        this.showSourceError('Source and target languages must be different');
                        return;
                    }
                    
                    // Set translating state
                    this.state.isTranslating = true;
                    
                    // Hide audio player if it's visible
                    this.elements.audioPlayer.classList.remove('active');
                    
                    // Show loading indicator
                    this.elements.translationLoading.classList.add('active');
                    
                    // Get language codes (only the first part before the hyphen, lowercase)
                    const sourceLangCode = sourceLang.split('-')[0].toLowerCase();
                    const targetLangCode = targetLang.split('-')[0].toLowerCase();
                    
                    // Make an API call to translate the text
                    fetch('/translate', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({
                            text: sourceText,
                            source_lang: sourceLangCode,
                            target_lang: targetLangCode
                        })
                    })
                    .then(response => {
                        if (!response.ok) {
                            return response.json().then(data => {
                                throw new Error(data.details || data.error || 'Translation failed');
                            });
                        }
                        return response.json();
                    })
                    .then(data => {
                        // Update translation field
                        this.elements.translatedText.value = data.translated_text;
                        
                        // Hide empty state
                        this.elements.emptyState.style.display = 'none';
                        
                        // Enable translation controls
                        this.elements.listen.disabled = false;
                        this.elements.listen.classList.remove('text-gray-400');
                        this.elements.listen.classList.add('text-turquoise');
                        
                        this.elements.copyTranslation.disabled = false;
                        this.elements.copyTranslation.classList.remove('text-gray-400');
                        this.elements.copyTranslation.classList.add('text-turquoise');
                        
                        this.elements.download.disabled = false;
                        this.elements.download.classList.remove('text-gray-400');
                        this.elements.download.classList.add('text-turquoise');
                        
                        // Set the audio URL if provided
                        if (data.audio_url) {
                            this.state.currentAudioUrl = data.audio_url;
                            this.elements.translationAudio.src = data.audio_url;
                            this.elements.audioLanguage.textContent = this.config.supportedLanguages[targetLang];
                            this.elements.audioPlayer.classList.add('active');
                        } else {
                            this.state.currentAudioUrl = null;
                        }
                        
                        // Add to recent translations
                        this.addToRecentTranslations(sourceText, data.translated_text, sourceLang, targetLang);
                        
                        // Reset state
                        this.state.isTranslating = false;
                        
                        // Hide loading indicator
                        this.elements.translationLoading.classList.remove('active');
                    })
                    .catch(error => {
                        // Show error message
                        this.showTranslationError(error.message);
                        
                        // Reset state
                        this.state.isTranslating = false;
                        
                        // Hide loading indicator
                        this.elements.translationLoading.classList.remove('active');
                    });
                },

                updateCharacterCount() {
                    const count = this.elements.sourceText.value.length;
                    this.elements.characterCount.textContent = `${count} characters`;
                    
                    // Warn if approaching character limit
                    if (count > this.config.maxCharacterLimit * 0.8) {
                        this.elements.characterCount.classList.add('text-coral');
                    } else {
                        this.elements.characterCount.classList.remove('text-coral');
                    }
                    
                    // Show error if exceeding limit
                    if (count > this.config.maxCharacterLimit) {
                        this.showSourceError(`Text exceeds maximum character limit of ${this.config.maxCharacterLimit}`);
                    } else {
                        this.hideSourceError();
                    }
                },

                toggleEmptyState() {
                    if (this.elements.translatedText.value.trim() === '') {
                        this.elements.emptyState.style.display = 'flex';
                    } else {
                        this.elements.emptyState.style.display = 'none';
                    }
                },

                swapLanguages() {
                    const sourceLang = this.elements.sourceLanguage.value;
                    const targetLang = this.elements.targetLanguage.value;
                    
                    // Swap the language selections
                    this.elements.sourceLanguage.value = targetLang;
                    this.elements.targetLanguage.value = sourceLang;
                    
                    // If there's translated text, swap that too
                    if (this.elements.translatedText.value) {
                        const sourceText = this.elements.sourceText.value;
                        this.elements.sourceText.value = this.elements.translatedText.value;
                        this.elements.translatedText.value = sourceText;
                        this.updateCharacterCount();
                    }
                    
                    // Apply animation
                    this.elements.swapLanguages.classList.add('rotate-180');
                    setTimeout(() => {
                        this.elements.swapLanguages.classList.remove('rotate-180');
                    }, 300);
                    
                    // Reset audio player
                    this.elements.audioPlayer.classList.remove('active');
                    this.state.currentAudioUrl = null;
                },

                startVoiceInput() {
                    this.elements.voiceModal.classList.remove('hidden');
                },
                
                startRecording() {
                    if (this.state.speechRecognition) {
                        this.state.recordedText = '';
                        this.state.speechRecognition.start();
                    } else {
                        this.elements.voiceStatus.textContent = 'Speech recognition not supported in this browser';
                    }
                },
                
                stopRecording() {
                    if (this.state.speechRecognition) {
                        this.state.speechRecognition.stop();
                    }
                },
                
                cancelVoiceInput() {
                    if (this.state.isRecording) {
                        this.stopRecording();
                    }
                    this.state.recordedText = '';
                    this.elements.voiceModal.classList.add('hidden');
                },
                
                confirmVoiceInput() {
                    this.elements.sourceText.value = this.state.recordedText;
                    this.updateCharacterCount();
                    this.elements.voiceModal.classList.add('hidden');
                    
                    // Auto-translate if user confirms voice input
                    if (this.state.recordedText) {
                        this.performTranslation();
                    }
                },

                copyText(element) {
                    if (!element.value) return;
                    
                    element.select();
                    document.execCommand('copy');
                    
                    // Visual feedback
                    const button = element === this.elements.sourceText 
                        ? this.elements.copySource 
                        : this.elements.copyTranslation;
                    
                    const originalText = button.innerHTML;
                    button.innerHTML = '<i class="fas fa-check mr-1"></i> Copied!';
                    button.classList.add('text-green-500');
                    
                    setTimeout(() => {
                        button.innerHTML = originalText;
                        button.classList.remove('text-green-500');
                    }, 2000);
                    
                    // Deselect the text
                    window.getSelection().removeAllRanges();
                },

                clearSource() {
                    this.elements.sourceText.value = '';
                    this.updateCharacterCount();
                    
                    // Clear translation as well
                    this.elements.translatedText.value = '';
                    this.toggleEmptyState();
                    
                    // Hide audio player
                    this.elements.audioPlayer.classList.remove('active');
                    this.state.currentAudioUrl = null;
                    
                    // Disable translation controls
                    this.elements.listen.disabled = true;
                    this.elements.listen.classList.add('text-gray-400');
                    this.elements.listen.classList.remove('text-turquoise');
                    
                    this.elements.copyTranslation.disabled = true;
                    this.elements.copyTranslation.classList.add('text-gray-400');
                    this.elements.copyTranslation.classList.remove('text-turquoise');
                    
                    this.elements.download.disabled = true;
                    this.elements.download.classList.add('text-gray-400');
                    this.elements.download.classList.remove('text-turquoise');
                    
                    // Hide any error messages
                    this.hideSourceError();
                    this.hideTranslationError();
                },

                speakText(text, langCode) {
                    if (!text) return;
                    
                    // First try to use the browser's speech synthesis
                    if ('speechSynthesis' in window) {
                        // Stop any currently speaking synthesis
                        window.speechSynthesis.cancel();
                        
                        const utterance = new SpeechSynthesisUtterance(text);
                        utterance.lang = langCode.split('-')[0] || 'en';
                        
                        // Visual feedback while speaking
                        this.elements.listen.innerHTML = '<i class="fas fa-volume-up fa-pulse"></i>';
                        
                        utterance.onend = () => {
                            this.elements.listen.innerHTML = '<i class="fas fa-volume-up"></i>';
                        };
                        
                        window.speechSynthesis.speak(utterance);
                    } else {
                        // Fallback - use the API to generate speech
                        const langPart = langCode.split('-')[0].toLowerCase();
                        
                        fetch('/text_to_speech', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({
                                text: text,
                                language: langCode
                            })
                        })
                        .then(response => response.json())
                        .then(data => {
                            if (data.audio_url) {
                                this.state.currentAudioUrl = data.audio_url;
                                this.elements.translationAudio.src = data.audio_url;
                                this.elements.audioLanguage.textContent = this.config.supportedLanguages[langCode];
                                this.elements.audioPlayer.classList.add('active');
                                this.elements.translationAudio.play();
                            }
                        })
                        .catch(error => {
                            console.error('Error with text-to-speech:', error);
                            this.showTranslationError('Could not generate audio for this text');
                        });
                    }
                },

                downloadTranslation() {
                    if (!this.elements.translatedText.value) return;
                    
                    const sourceLang = this.config.supportedLanguages[this.elements.sourceLanguage.value];
                    const targetLang = this.config.supportedLanguages[this.elements.targetLanguage.value];
                    
                    const text = `Translation from ${sourceLang} to ${targetLang}\n` +
                                `Date: ${new Date().toISOString()}\n` +
                                `Source: ${this.elements.sourceText.value}\n` +
                                `Translation: ${this.elements.translatedText.value}`;
                    
                    const blob = new Blob([text], { type: 'text/plain' });
                    const url = URL.createObjectURL(blob);
                    
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `translation_${this.elements.sourceLanguage.value.split('-')[0]}_to_${this.elements.targetLanguage.value.split('-')[0]}_${Date.now()}.txt`;
                    a.click();
                    
                    URL.revokeObjectURL(url);
                },

                loadRecentTranslations() {
                    // In a real app, you would load this from localStorage or a database
                    const recentTranslations = localStorage.getItem('recentTranslations');
                    
                    if (recentTranslations) {
                        this.state.recentTranslations = JSON.parse(recentTranslations);
                        this.renderRecentTranslations();
                    }
                },

                addToRecentTranslations(sourceText, translatedText, sourceLang, targetLang) {
                    const translation = {
                        id: Date.now(),
                        sourceText: sourceText,
                        translatedText: translatedText,
                        sourceLang: sourceLang,
                        targetLang: targetLang,
                        timestamp: new Date().toISOString()
                    };
                    
                    // Add to the beginning of the array
                    this.state.recentTranslations.unshift(translation);
                    
                    // Keep only the last 10 translations
                    if (this.state.recentTranslations.length > 10) {
                        this.state.recentTranslations = this.state.recentTranslations.slice(0, 10);
                    }
                    
                                        // Save to localStorage
                                        localStorage.setItem('recentTranslations', JSON.stringify(this.state.recentTranslations));
                    
                    // Update the UI
                    this.renderRecentTranslations();
                },

                renderRecentTranslations() {
                    if (this.state.recentTranslations.length === 0) {
                        this.elements.recentTranslations.innerHTML = `
                            <div class="text-center text-gray-500 py-6">
                                <i class="fas fa-history text-3xl mb-2 text-turquoise/50"></i>
                                <p>Your recent translations will appear here</p>
                            </div>
                        `;
                        return;
                    }
                    
                    this.elements.noTranslationsMessage.style.display = 'none';
                    this.elements.recentTranslations.innerHTML = '';
                    
                    this.state.recentTranslations.forEach(translation => {
                        const card = document.createElement('div');
                        card.className = 'recent-translation-card bg-white p-4 rounded-lg shadow';
                        card.innerHTML = `
                            <div class="flex justify-between items-start mb-2">
                                <div class="flex-1">
                                    <div class="flex items-center gap-2 mb-1">
                                        <span class="text-xs font-medium bg-soft-sand text-deep-turquoise px-2 py-0.5 rounded">
                                            ${this.config.supportedLanguages[translation.sourceLang]}
                                        </span>
                                        <i class="fas fa-arrow-right text-xs text-gray-400"></i>
                                        <span class="text-xs font-medium bg-soft-sand text-deep-turquoise px-2 py-0.5 rounded">
                                            ${this.config.supportedLanguages[translation.targetLang]}
                                        </span>
                                    </div>
                                    <div class="text-sm text-gray-700 font-medium line-clamp-1">${translation.sourceText}</div>
                                    <div class="text-sm text-gray-500 mt-1 line-clamp-1">${translation.translatedText}</div>
                                </div>
                                <div class="flex gap-2 ml-2">
                                    <button class="text-gray-400 hover:text-turquoise transition-colors" 
                                            title="Reuse" 
                                            data-id="${translation.id}">
                                        <i class="fas fa-redo-alt"></i>
                                    </button>
                                    <button class="text-gray-400 hover:text-turquoise transition-colors" 
                                            title="Delete" 
                                            data-id="${translation.id}">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="text-xs text-gray-400">${new Date(translation.timestamp).toLocaleString()}</div>
                        `;
                        
                        // Add event listeners for reuse and delete buttons
                        const reuseBtn = card.querySelector('button[title="Reuse"]');
                        const deleteBtn = card.querySelector('button[title="Delete"]');
                        
                        reuseBtn.addEventListener('click', () => {
                            this.reuseTranslation(translation.id);
                        });
                        
                        deleteBtn.addEventListener('click', () => {
                            this.deleteTranslation(translation.id);
                        });
                        
                        this.elements.recentTranslations.appendChild(card);
                    });
                },
                
                reuseTranslation(id) {
                    const translation = this.state.recentTranslations.find(t => t.id === id);
                    if (!translation) return;
                    
                    // Set the source and target languages
                    this.elements.sourceLanguage.value = translation.sourceLang;
                    this.elements.targetLanguage.value = translation.targetLang;
                    
                    // Set the source text
                    this.elements.sourceText.value = translation.sourceText;
                    this.updateCharacterCount();
                    
                    // Set the translated text
                    this.elements.translatedText.value = translation.translatedText;
                    this.toggleEmptyState();
                    
                    // Reset audio player
                    this.elements.audioPlayer.classList.remove('active');
                    this.state.currentAudioUrl = null;
                    
                    // Enable translation controls
                    this.elements.listen.disabled = false;
                    this.elements.listen.classList.remove('text-gray-400');
                    this.elements.listen.classList.add('text-turquoise');
                    
                    this.elements.copyTranslation.disabled = false;
                    this.elements.copyTranslation.classList.remove('text-gray-400');
                    this.elements.copyTranslation.classList.add('text-turquoise');
                    
                    this.elements.download.disabled = false;
                    this.elements.download.classList.remove('text-gray-400');
                    this.elements.download.classList.add('text-turquoise');
                    
                    // Scroll to the translation interface
                    window.scrollTo({
                        top: this.elements.sourceText.getBoundingClientRect().top + window.pageYOffset - 100,
                        behavior: 'smooth'
                    });
                },
                
                deleteTranslation(id) {
                    this.state.recentTranslations = this.state.recentTranslations.filter(t => t.id !== id);
                    
                    // Save to localStorage
                    localStorage.setItem('recentTranslations', JSON.stringify(this.state.recentTranslations));
                    
                    // Update the UI
                    this.renderRecentTranslations();
                },
                
                showSourceError(message) {
                    this.elements.sourceErrorText.textContent = message;
                    this.elements.sourceErrorMessage.classList.add('active');
                },
                
                hideSourceError() {
                    this.elements.sourceErrorMessage.classList.remove('active');
                },
                
                showTranslationError(message) {
                    this.elements.translationErrorText.textContent = message;
                    this.elements.translationErrorMessage.classList.add('active');
                },
                
                hideTranslationError() {
                    this.elements.translationErrorMessage.classList.remove('active');
                }
            };
            
            // Initialize the application
            TranslationApp.init();
            
            // Set current user display
            const userWelcomeSpan = document.querySelector('.user-welcome span.font-medium');
            const footerUserInfo = document.querySelector('.mt-4.md\\:mt-0.text-xs.text-gray-400 span:nth-child(3)');
            
            if (userWelcomeSpan) {
                userWelcomeSpan.textContent = 'Maryem-Jlassi';
            }
            
            if (footerUserInfo) {
                footerUserInfo.textContent = 'User: Maryem-Jlassi';
            }
            
            // Set current date and time
            const currentDateTime = '2025-05-06 01:54:46';
            const userWelcomeDateTime = document.querySelector('.user-welcome div:last-child');
            const footerDateTime = document.querySelector('.mt-4.md\\:mt-0.text-xs.text-gray-400 span:first-child');
            
            if (userWelcomeDateTime) {
                userWelcomeDateTime.innerHTML = `<i class="far fa-clock mr-2"></i>${currentDateTime} UTC`;
            }
            
            if (footerDateTime) {
                footerDateTime.textContent = `Last updated: ${currentDateTime} UTC`;
            }
            
            // Add event listeners for wave bars animation
            const waveBars = document.querySelectorAll('.wave-bar');
            waveBars.forEach((bar, index) => {
                bar.style.animationDelay = `${index * 0.1}s`;
            });
            
            // Easter egg - add a special animation when clicking the logo multiple times
            const logo = document.querySelector('.logo');
            let logoClickCount = 0;
            
            if (logo) {
                logo.addEventListener('click', () => {
                    logoClickCount++;
                    
                    if (logoClickCount >= 5) {
                        logo.classList.add('floating');
                        
                        setTimeout(() => {
                            logo.classList.remove('floating');
                            logoClickCount = 0;
                        }, 6000);
                    }
                });
            }
            
            // Language pair compatibility check
            function checkLanguageCompatibility() {
                const sourceLanguage = document.getElementById('sourceLanguage').value.split('-')[0].toLowerCase();
                const targetLanguage = document.getElementById('targetLanguage').value.split('-')[0].toLowerCase();
                
                // List of language pairs that are known to work with the Helsinki-NLP models
                const supportedPairs = [
                    'en-fr', 'fr-en',
                    'en-de', 'de-en',
                    'en-es', 'es-en',
                    'en-ru', 'ru-en',
                    'en-zh', 'zh-en',
                    'en-ar', 'ar-en',
                    'fr-de', 'de-fr',
                    'fr-es', 'es-fr',
                    'de-ru', 'ru-de'
                ];
                
                const pair = `${sourceLanguage}-${targetLanguage}`;
                const translateButton = document.getElementById('translateBtn');
                
                if (!supportedPairs.includes(pair) && sourceLanguage !== targetLanguage) {
                    // Display a warning but don't disable the button
                    translateButton.title = "This language pair might have lower quality translations";
                    translateButton.classList.add('bg-opacity-90');
                } else {
                    translateButton.title = "";
                    translateButton.classList.remove('bg-opacity-90');
                }
            }
            
            // Monitor language selection changes
            document.getElementById('sourceLanguage').addEventListener('change', checkLanguageCompatibility);
            document.getElementById('targetLanguage').addEventListener('change', checkLanguageCompatibility);
            
            // Initial check
            checkLanguageCompatibility();
        });
    </script>
</body>
</html>